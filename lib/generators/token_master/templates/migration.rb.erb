class <%= "#{migration_name.classify}" %> < <%= migration_class_name %>
  def change
    <% attributes.each do |attribute| %>
      add_column :<%= name.tableize %>, <%= "#{attribute}_token".to_sym %>, :string, default: nil
      add_column :<%= name.tableize %>, <%= "#{attribute}_created_at".to_sym %>, :timestamp, default: nil
      add_column :<%= name.tableize %>, <%= "#{attribute}_sent_at".to_sym %>, :timestamp, default: nil
      add_column :<%= name.tableize %>, <%= "#{attribute}_completed_at".to_sym %>, :timestamp, default: nil

      add_index :<%= name.tableize %>, <%= "#{attribute}_token".to_sym %>
    <% end %>
  end
end
